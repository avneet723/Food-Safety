33084ca05d36be4f6f33c9c37dd97be5
jsio("from util.browser import $");jsio("import std.uri");jsio("import std.js as JS");jsio("import lib.Iterator");jsio("import lib.Callback");jsio("import device");jsio("import ui.widget.Spinner as Spinner");var config=window.CONFIG;logger.log("ITS ",GLOBAL.HTMLCanvasElement);
var uiExports={GCView:function(){jsio("import ui.View");return ui.View},GCImage:function(){jsio("import ui.resource.Image");return ui.resource.Image},GCImageView:function(){jsio("import ui.ImageView");return ui.ImageView},GCCanvas:getCanvasCtor,GCSprite:function(){jsio("import ui.SpriteView");return ui.SpriteView},GCResources:function(){jsio("import ui.resource.loader");return ui.resource.loader}},sdk_gc_UI=__class__;
exports=sdk_gc_UI(function(){return this.init&&this.init.apply(this,arguments)},function(){this.cssFile=function(b,a){var d=CACHE[b];d&&($({tag:"style",text:d,parent:document.getElementsByTagName("head")[0]}),setTimeout(a,0))};this._spinnerCounter=0;jsio("import device");var a;this._scale=a=navigator.displayMetrics?navigator.displayMetrics.densityDpi/160:!CONFIG.scaleDPR&&device.isMobileBrowser?1:window.devicePixelRatio||1;this.setTargetDensity=function(b){switch(b){case "high":this._scale=0.5*a;
break;case "medium":this._scale=0.75*a;break;default:this._scale=a}logger.log("scale:",this._scale)};this.getScale=function(){return this._scale};this.getIntValue=function(b){return Math.round(b*this._scale)/this._scale};this.showSpinner=function(){if(this._spinnerCounter)++this._spinnerCounter;else{var b=GC.app.view;if(b)if(++this._spinnerCounter,this._spinner)b.addSubview(this._spinner);else{var a=50*device.screen.devicePixelRatio;this._spinner=new Spinner({width:a,height:a,x:b.style.width/2-a/
2,y:b.style.height/2-a/2,parent:b})}}};this.hideSpinner=function(){--this._spinnerCounter;0>=this._spinnerCounter&&(this._spinnerCounter=0,this._spinner&&this._spinner.removeFromSuperview())}});var cache={},key;for(key in uiExports){var getter=bind(GLOBAL,function(a){return cache[a]||(cache[a]=uiExports[a]())},key);GLOBAL.__defineGetter__?GLOBAL.__defineGetter__(key,getter):Object.defineProperty&&Object.defineProperty(GLOBAL,key,{get:getter})}
function AsyncImageLoader(a,b){var c=new ui.resource.Image({url:a});c.doOnLoad(function(){b(c)})}function getCanvasCtor(){jsio("import device");return device.get("Canvas")};
