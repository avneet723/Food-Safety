11cd353711a9b81797dbe746a10dd008
for(var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",trailingPad="=",padChar=alphabet.charAt(alphabet.length-1),decodeMap={},i=0,len=alphabet.length;i<len;i++)decodeMap[alphabet.charAt(i)]=i;var alphabet_inverse=RegExp("[^"+alphabet.replace("-","\\-")+"]");exports.Base64CodecError=__class__;
exports.Base64CodecError=exports.Base64CodecError(function(){return this.init&&this.init.apply(this,arguments)},Error,function(){this.name="Base64CodecError";this.init=function(a){this.message=a}});var assertOrBadInput=function(a,b){if(!a)throw new exports.Base64CodecError(b);};
exports.encode=function(a,b){assertOrBadInput(!/[^\x00-\xFF]/.test(a),"Input contains out-of-range characters.");for(var d=a.length%3,c="\x00\x00\x00".slice(d||3),a=a+c,e=[],f=0,h=a.length;f<h;f+=3){var g=(a.charCodeAt(f)<<16)+(a.charCodeAt(f+1)<<8)+a.charCodeAt(f+2);e.push(alphabet.charAt(g>>18&63),alphabet.charAt(g>>12&63),alphabet.charAt(g>>6&63),alphabet.charAt(g&63))}e.length-=c.length;c=e.join("");b||(1==d?c+="==":2==d&&(c+="="));return c};
exports.decode=function(a){logger.debug("decode",a);for(var a=a.replace(/\s/g,""),b=a.length;a.charAt(--b)===trailingPad;);a=a.slice(0,b+1);assertOrBadInput(!alphabet_inverse.test(a),"Input contains out-of-range characters.");for(var d=4-(a.length%4||4),c=Array(d+1).join(padChar),a=a+c,c=[],e=b+d+1,b=0;b<e;b+=4)newchars=(decodeMap[a.charAt(b)]<<18)+(decodeMap[a.charAt(b+1)]<<12)+(decodeMap[a.charAt(b+2)]<<6)+decodeMap[a.charAt(b+3)],c.push(newchars>>16&255,newchars>>8&255,newchars&255);e=c.length-=
d;if(65536<e){a=[];for(d=b=0;b<e;)a[d++]=String.fromCharCode.apply(String,c.slice(b,b+65536)),b+=65536;a=a.join("")}else a=String.fromCharCode.apply(String,c);logger.debug("decoded",a);return a};
