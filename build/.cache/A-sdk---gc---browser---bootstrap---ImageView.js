7b0d206a955e72a0843f101cacf13ed7
jsio("import .renderer");var sdk_gc_browser_bootstrap_ImageView=__class__;
exports=sdk_gc_browser_bootstrap_ImageView(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(a){a||(a={});this.x=a.x||0;this.y=a.y||0;this.width=a.width||0;this.height=a.height||0;this._scaleMethod=a.scaleMethod||"stretch";this.setImage(a.image);this._verticalAlign=a.verticalAlign;this._align=a.align;this._onload=a.onload;a.sourceSlices&&a.destSlices&&(this._sourceSlices=a.sourceSlices,this._destSlices=a.destSlices,this._sourceSlicesHor=[a.sourceSlices.hor.left,
a.sourceSlices.hor.center,a.sourceSlices.hor.right],this._sourceSlicesVer=[a.sourceSlices.ver.top,a.sourceSlices.ver.middle,a.sourceSlices.ver.bottom],this._destSlicesHor=[a.destSlices.hor.left,0,a.destSlices.hor.right],this._destSlicesVer=[a.destSlices.ver.top,0,a.destSlices.ver.bottom],this._checkBounds=!0);this.computePosition();renderer.add(this)};this.getImage=function(){return this._img};this.setImage=function(a){"string"==typeof a?(this._img=new Image,this._img.onload=bind(this,function(){this._onload&&
this._onload(this);renderer.render()}),this._img.src=a):this._img=a};this.computePosition=function(){var a=this.width||renderer.width,c=this.height||renderer.height,e=this._img.width,d=this._img.height;if(!this._img.complete)return!1;switch(this._scaleMethod){case "none":return{x:0,y:0,width:e,height:d,scale:1};case "stretch":return{x:0,y:0,width:a,height:c};default:var f=1,f=e/d,g=a/c,f=("cover"==this._scaleMethod?g>f:g<f)?a/e:c/d,e=e*f,d=d*f;return{x:"left"==this._align?0:"right"==this._align?a-
e:(a-e)/2,y:"top"==this._verticalAlign?0:"bottom"==this._verticalAlign?c-d:(c-d)/2,width:e,height:d,scale:f}}};this.render=function(a){if(this._img&&this._img.complete){a.save();try{if(a.translate(this.x,this.y),"9slice"===this._scaleMethod){var c=["#FF0000","#00FF00","#0000FF"],e=this._img,d=this._img.width,f=this._img.height,g=this._sourceSlicesHor,q=this._sourceSlicesVer,j=[],k=[],t=this.width||renderer.width,u=this.height||renderer.height,r,s,h,i,m,n,o,p,b,l;if(!(0>=d||0>=f)){if(this._checkBounds){this._checkBounds=
!1;for(b=i=h=0;3>b;b++)h+=g[b],i+=q[b];for(b=0;3>b;b++)g[b]=g[b]*d/h|0,q[b]=q[b]*f/i|0}j[0]=1*this._destSlicesHor[0]|0;j[2]=1*this._destSlicesHor[2]|0;j[1]=t-j[0]-j[2];k[0]=1*this._destSlicesVer[0]|0;k[2]=1*this._destSlicesVer[2]|0;k[1]=u-k[0]-k[2];for(l=n=s=0;3>l;l++){i=q[l];p=k[l];for(b=m=r=0;3>b;b++)h=g[b],o=j[b],0<o&&0<p&&(a.drawImage(e,r,s,h,i,m,n,o,p),this.debug&&(a.strokeStyle=c[(l+b)%3],a.strokeRect(m+0.5,n+0.5,o-1,p-1))),r+=h,m+=o;s+=i;n+=p}}}else(c=this.computePosition())&&a.drawImage(this._img,
c.x,c.y,c.width,c.height)}catch(v){}finally{a.restore()}}}});
