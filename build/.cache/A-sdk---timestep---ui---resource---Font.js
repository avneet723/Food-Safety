76394f5e05f496d27596d3361f657570
jsio("import device");var _cache={},weights="normal|bold|bolder|lighter|[1-9]00",styles="normal|italic|oblique",units="px|pt|pc|in|cm|mm|%",name="([\\w\"'\\- ]+(?:,|$))+",fontParser=RegExp("^ *(?:("+weights+") *)?(?:("+styles+") *)?([\\d\\.]+)("+units+")("+name+")","i"),sizeParser=RegExp("([\\d\\.]+)("+units+")","i"),TO_PT={pt:1,px:0.75,"in":72,mm:72/25.4,cm:72/2.54},TO_PX={pt:4/3,px:1,"in":96,mm:96/25.4,cm:96/2.54};
function parseSize(a){a=a.match(sizeParser);if(!a)throw"invalid font size";return{value:parseFloat(a[1]),unit:a[2]}}function toPx(a){return{value:a.value*TO_PX[a.unit],unit:"px"}}function toPt(a){return{value:a.value*TO_PT[a.unit],unit:"pt"}}
function parseFont(a){a=a.match(fontParser);if(!a)throw"invalid font string";var b={};b.weight=a[1]||"normal";b.style=a[2]||"normal";b.size={value:parseFloat(a[3]),unit:a[4]};b.names=a[5].split(",").map(function(a){return a.replace(/[\-_]/g," ").replace(/\s+/g," ").replace(/['"]/g,"").replace(/^\s+|\s+$/g,"")});b.name=b.names[0];return b}
var sdk_timestep_ui_resource_Font=__class__,Font=exports=sdk_timestep_ui_resource_Font(function(){return this.init&&this.init.apply(this,arguments)},function(){var a={name:device.defaultFontFamily,size:20,unit:"px",style:"",weight:""};this.init=function(b){"string"===typeof b?(_cache[b]=this,this._string=b,b=parseFont(b)):b=merge(b,a);"string"==typeof b.size&&(b.size=parseSize(b.size));this._name=b.name;this._style=b.style;this.size=b.size;this.sizePx=toPx(this.size).value;this.sizePt=toPt(this.size).value;
this._weight=b.weight;this._isBold=/bold/i.test(this._weight)};this.getSize=function(){return this.sizePx};this.getName=function(){return this._name};this.getWeight=function(){return this._weight}});exports.parse=function(a){return a in _cache?_cache[a]:new Font(a)};
