d73bb0ed480249556bb9809f2d814b40
jsio("import ui.View as View");var sdk_timestep_ui_widget_Spinner=__class__;
exports=sdk_timestep_ui_widget_Spinner(function(){return this.init&&this.init.apply(this,arguments)},View,function(j){var k={cycles:0.5,radius:10,spokes:20,thickness:2,trail:10,color:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.5)",layout:"box"};this.tag="Spinner";this._t=0;this.init=function(a){this._opts=merge(a,k);this._step=2*Math.PI/this._opts.spokes;j(this,"init",[this._opts])};this.tick=function(a){this._t+=a;var a=this._t/1E3%(1/this._opts.cycles)*Math.PI,d=this._r;this._r=a-a%this._step;d!=
a&&this.needsRepaint()};this.render=function(a){a.fillStyle=this._opts.backgroundColor;var d=this.style.width,g=this.style.height,c=this._opts.radius,h=this._opts.trail,i=this._opts.thickness,b,f,e;for(f=0;f<c;++f)b=f+1,b=Math.round(c-Math.sqrt(2*b*c-b*b)),a.fillRect(b,f,d-2*b,1);f=g-c;a.fillRect(0,c,d,f-c);for(e=0;e<c;++e)b=c-e,b=Math.round(c-Math.sqrt(2*b*c-b*b)),a.fillRect(b,f+e,d-2*b,1);a.fillStyle=this._opts.color;a.translate(d/2,g/2);d/=2;a.rotate(this._r);for(e=0;e<this._opts.spokes;++e)a.rotate(this._step),
a.globalAlpha=Math.max(0.1,(e-h)/h),a.fillRect(10,-i/2,d-15,i)}});
