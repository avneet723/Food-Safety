e723ae9482aa8e396903fb9891998b0c
jsio("import ui.View");var sdk_timestep_ui_backend_dom_StackView=__class__;
exports=sdk_timestep_ui_backend_dom_StackView(function(){return this.init&&this.init.apply(this,arguments)},View,function(d){this.init=function(a){d(this,"init",arguments);this.stack=[]};this.getCurrentView=function(){return!this.stack.length?null:this.stack[this.stack.length-1]};this.push=function(a,b){!this.stack[0]&&!1!==b&&(b=!0);var c=this.getCurrentView();c&&this._hide(c,b);a.style.width=this.style.width;a.style.height=this.style.height;this.stack.push(a);this._show(a,b);return a};this._hide=
function(a,b,c){a.publish("ViewWillDisappear");b?(this.removeSubview(a),a.publish("ViewDidDisappear")):(b=new View({parent:a,zIndex:1E5}),a.then({x:(c?1:-1)*a.style.width}).then(bind(this,"removeSubview",a)).then(bind(a,"publish","ViewDidDisappear")).then(bind(b,"removeFromSuperview")))};this._show=function(a,b,c){a.publish("ViewWillAppear");a.style.visible=!0;b?(this.addSubview(a),a.style.x=0,a.publish("ViewDidAppear")):(a.style.x=(c?-1:1)*this.style.width,this.addSubview(a),a.then({x:0}).then(bind(a,
"publish","ViewDidAppear")))};this.pop=function(a){if(!this.stack.length)return!1;var b=this.stack.pop();this._hide(b,a,!0);this.stack.length&&this._show(this.stack[this.stack.length-1],a,!0);return b};this.popAll=function(a){for(;this.stack[1];)this.pop(a)}});
