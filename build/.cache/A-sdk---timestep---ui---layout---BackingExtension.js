72d7f6e017b7687a0d021b73e730d74f
jsio("import ..View");jsio("import ..backend.strPad as strPad");jsio("import ..backend.BaseBacking");jsio("import .BoxLayout");jsio("import .LinearLayout");jsio("import .Padding");jsio("import util.setProperty");
var layoutProps={layout:{value:!1,cb:"_onSetLayout"},inLayout:{value:!0,cb:"_onInLayout"},order:{value:0,cb:"_onOrder"},direction:{value:"down",cb:"_onLayoutChange"},flex:{value:0,cb:"_onLayoutChange"},halign:{value:"start"},halignSelf:{value:void 0},valign:{value:"start"},valignSelf:{value:void 0},centerX:{value:!1},centerY:{value:!1},top:{value:void 0,cb:"_onLayoutChange"},right:{value:void 0,cb:"_onLayoutChange"},bottom:{value:void 0,cb:"_onLayoutChange"},left:{value:void 0,cb:"_onLayoutChange"},
justifyContent:{value:"start",cb:"_onLayoutChange"},sizeContainerToFit:{value:!1,cb:"_onLayoutChange"},minWidth:{value:void 0,cb:"_onLayoutChange"},minHeight:{value:void 0,cb:"_onLayoutChange"},maxWidth:{value:void 0,cb:"_onLayoutChange"},maxHeight:{value:void 0,cb:"_onLayoutChange"},layoutWidth:{value:void 0,cb:"_onLayoutChange"},layoutHeight:{value:void 0,cb:"_onLayoutChange"},fixedAspectRatio:{value:!1,cb:"_onFixedAspectRatio"},aspectRatio:{value:null,cb:"_onLayoutChange"},margin:{value:null,cb:"_onMarginChange"}},
key;for(key in layoutProps)backend.BaseBacking.addProperty(key,layoutProps[key]);util.setProperty(backend.BaseBacking.prototype,"padding",{get:function(){return this._padding||(this._padding=new Padding)},set:function(a){this._padding?this._padding.update(a):this._padding=new Padding(a);this._onLayoutChange()}});
View.addExtension({extend:function(a){a=a.prototype;a._sortOrder=strPad.initialValue;a._onOrder=function(a,b){this._sortOrder=strPad.pad(b);this._onLayoutChange()};a._onMarginChange=function(a,b){this._cachedMargin?this._cachedMargin.update(b):this._cachedMargin=new Padding(b);this.top=this._cachedMargin.top;this.bottom=this._cachedMargin.bottom;this.left=this._cachedMargin.left;this.right=this._cachedMargin.right;this._onLayoutChange()};a._onFixedAspectRatio=function(a,b){b&&this.updateAspectRatio()};
a.updateAspectRatio=function(a,b){this.aspectRatio=(a||this.width)/(b||this.height)};a._onSetLayout=function(a,b){switch(b){case "linear":this._view.__layout=new LinearLayout({view:this._view});break;case "box":this._view.__layout=new BoxLayout({view:this._view})}};a._onInLayout=function(a,b){var c=this._superview&&this._superview.__layout;c&&(b?c.add(this._view):(c.remove(this._view),this._view.needsReflow()))};a._onLayoutChange=function(){var a=this.getSuperview();a&&a.__layout&&a.needsReflow();
this._view.needsReflow()}}});
