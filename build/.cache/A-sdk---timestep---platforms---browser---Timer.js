712141f2aa93734eb8fda808a49b9d60
var _onTick=null,disableRequestAnimFrame=!1,disablePostMessage=!0,asFastAsPossible=!1,MIN_DT=16;if(window.postMessage){var postMessageCb=function(a){"timestep.TICK"==a.data&&onFrame()};window.addEventListener?window.addEventListener("message",postMessageCb,!1):window.attachEvent("onmessage",postMessageCb)}else disablePostMessage=!0,tickNow=sendTimeoutNow;function sendPostMessage(){window.postMessage("timestep.TICK","*")}function sendTimeout(){setTimeout(onFrame,MIN_DT)}
function sendTimeoutNow(){setTimeout(onFrame,0)}var fastDriver=sendTimeoutNow,mainDriver=sendTimeout;if(asFastAsPossible)disablePostMessage?mainDriver=sendTimeoutNow:fastDriver=mainDriver=sendPostMessage;else{var reqAnim=!disableRequestAnimFrame&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame);reqAnim?fastDriver=mainDriver=reqAnim:disablePostMessage||(fastDriver=sendPostMessage)}
function onFrame(){if(_onTick){var a=+new Date,b=a-(exports.last||a);exports.last=a;_onTick(b);b>MIN_DT?fastDriver.call(window,onFrame):mainDriver.call(window,onFrame)}}exports.last=null;exports.start=function(a){_onTick=a;mainDriver.call(window,onFrame)};exports.stop=function(){_onTick=null};
