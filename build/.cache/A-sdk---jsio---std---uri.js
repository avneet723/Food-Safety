a356be8e10cd1e5f3b75d6f41e071494
var attrs="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),sdk_jsio_std_uri=__class__,URI=exports=sdk_jsio_std_uri(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(b,e){if(b instanceof URI)for(var c=0,a;a=attrs[c];++c)this["_"+a]=b["_"+a];else for(a in this._isStrict=e,c=exports.parse(b,e),c)this["_"+a]=c[a]};for(var a=0,d;d=attrs[a];++a)(function(b){var a=b.charAt(0).toUpperCase()+b.slice(1);
this["get"+a]=function(){return this["_"+b]};this["set"+a]=function(a){this["_"+b]=a;return this}}).call(this,d);this.query=function(b){return exports.parseQuery(this._query)[b]};this.hash=function(b){return exports.parseQuery(this._anchor)[b]};this.addHash=function(b){var a=exports.parseQuery(this._anchor),c;for(c in b)a[c]=b[c];this._anchor=exports.buildQuery(a);return this};this.push=function(b){b&&(this._path=(this._path+"/"+b).replace(/\/\/+/g,"/"));return this};this.addQuery=function(b){var a=
exports.parseQuery(this._query),c;for(c in b)a[c]=b[c];this._query=exports.buildQuery(a);return this};this.removeQuery=function(b){var a=exports.parseQuery(this._query);if(isArray(b))for(var c=0,d=b.length;c<d;++c)delete a[b[c]];else delete a[b];this._query=exports.buildQuery(a);return this};this.toJSON=function(){return this.toString(!1)};this.toString=function(a){var d=this._protocol?this._protocol+"://":"",c=this._host?this._host+(80==(this._port||80)?"":":"+this._port):"";return a?d+c:d+c+this._path+
(this._query?"?"+this._query:"")+(this._anchor?"#"+this._anchor:"")}});exports.relativeTo=function(a,d){a=""+a;if(d&&!/^http(s?):\/\//.test(a))var b=(new exports(d)).setAnchor("").setQuery("").setFile("").toString("/"==a.charAt(0)),a=exports.resolveRelative(b+a);return new URI(a)};exports.resolveRelative=function(a){for(;a!=(a=a.replace(/(^|\/)([^\/]+)\/\.\.\//g,"/")););return a.replace(/[^.]\.\//g,"")};
exports.buildQuery=function(a){var d=[],b;for(b in a)d.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return d.join("&")};exports.parseQuery=function(a){for(var a=a.split("&"),d=a.length,b={},e=0;e<d;++e){var c=a[e].split("="),f=decodeURIComponent(c[0]);f&&(b[f]=decodeURIComponent(c[1]))}return b};
var strictRegex=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,looseRegex=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,queryStringRegex=/(?:^|&)([^&=]*)=?([^&]*)/g;
exports.parse=function(a,d){for(var b={},e=(d?strictRegex:looseRegex).exec(a),c=0,f;f=attrs[c];++c)b[f]=e[c]||"";var g=b.queryKey={};b.query.replace(queryStringRegex,function(a,b,c){a&&(g[b]=c)});return b};exports.isSameDomain=function(a,d){var b=exports.parse(a),e=exports.parse(d);return b.port==e.port&&b.host==e.host&&b.protocol==e.protocol};
